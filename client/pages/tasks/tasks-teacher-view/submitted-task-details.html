
<h5 style="margin-bottom: -14px;"><i class="bi bi-file-text" style="margin-right: 5px; font-size: 20px; vertical-align: bottom;"></i>Beschreibung</i></h5>
<hr size="4" style="color: purple; opacity: 80%;">

<div style=" margin-top: 10px; text-align: justify;" id="taskDescription">
</div>
<button type="button" id="taskDescriptionFile" style="display: none; margin-top: 20px; background-color: #eee;" class="btn btn-light"> <i style="color: purple;" class="bi bi-file-earmark-text"></i> <span id="taskDescriptionFileName"></span></button>



<script>

    function downloadTaskDescriptionFile(assignmentId) {
    window.location = "/ss22-itp-g02/backend/requestHandler.php?method=downloadAssignmentFile&assignment_id=" + assignmentId;
    }

    $.ajax({
        type: "POST",
        url: "/ss22-itp-g02/backend/requestHandler.php",
        data: {method: "getAssignmentById", assignment_id: assignmentId},
        cache: false,
        dataType: "json",
        success: function (response) {
            $("#taskDescription").text(response["text"]);

            if (response["file_path"]) {
                fileName = response["file_path"].split("/").pop()
                $("#taskDescriptionFileName").text(fileName);
                $("#taskDescriptionFile").show();
                $("#taskDescriptionFile").off();
                $("#taskDescriptionFile").click(() => {
                downloadTaskDescriptionFile(assignmentId);
                });
            }
        },
        error: function(error){
            console.log("AJAX-Request error: " + error);
        }
    });

</script>